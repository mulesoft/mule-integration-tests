<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns="http://www.mulesoft.org/schema/mule/core"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:test="http://www.mulesoft.org/schema/mule/test"
      xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
               http://www.mulesoft.org/schema/mule/test http://www.mulesoft.org/schema/mule/test/current/mule-test.xsd">

    <!--All exceptions thrown need to have an error defined to prevent a wrapping exception being logged -->

    <flow name="testEmptyExceptionLog">
        <test:skeleton-source/>
        <test:processor/>
        <test:throw exception="org.mule.functional.api.OnErrorAssertTestCase.EmptyException" error="ANY"/>
        <error-handler>
            <test:on-error-assert>
                <test:check-equals/>
            </test:on-error-assert>
        </error-handler>
    </flow>

    <flow name="noStacktraceException">
        <test:skeleton-source/>
        <test:processor/>
        <test:throw exception="org.mule.functional.api.OnErrorAssertTestCase.NoStacktraceException" error="ANY"/>
        <error-handler>
            <test:on-error-assert>
                <test:check-equals>
                    <![CDATA[
                        This is the logged exception
                        expected to be checked
                    ]]>
                </test:check-equals>
            </test:on-error-assert>
        </error-handler>
    </flow>

    <flow name="stacktraceException">
        <test:skeleton-source/>
        <test:processor/>
        <test:throw exception="org.mule.functional.api.OnErrorAssertTestCase.StacktraceException" error="ANY"/>
        <error-handler>
            <test:on-error-assert>
                <test:check-stacktrace>
                    <test:method-call method="" package="" class=""/>
                </test:check-stacktrace>
                <test:check-equals/>
            </test:on-error-assert>
        </error-handler>
    </flow>
</mule>
